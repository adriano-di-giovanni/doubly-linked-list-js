!function(a,b){"function"==typeof define&&define.amd?define(function(){return a.DoublyLinkedList=b()}):"object"==typeof exports?module.exports=b():a.DoublyLinkedList=b()}(this,function(){function a(a){this.data=a,this.previous=null,this.next=null}function b(){this._head=null,this._tail=null,this._length=0,this._isCircular=!1}var c={},d=Math.floor,e=Math.random;return a.prototype={constructor:a,hasPrevious:function(){return null!==this.previous},hasNext:function(){return null!==this.next}},b.VERSION="0.1.6",b.forge=function(){return new this},b.forgeCircular=function(){return this.forge().makeCircular()},b.prototype={constructor:b,makeCircular:function(){return this.isEmpty()||(this._head.previous=this._tail,this._tail.next=this._head),this._isCircular=!0,this},makeLinear:function(){return this.isEmpty()||(this._head.previous=null,this._tail.next=null),this._isCircular=!1,this},add:function(b){var c=new a(b),d=this._tail;return this.isEmpty()?(this._head=c,this._tail=c):(d.next=c,c.previous=d,this._tail=c),this._length+=1,this._isCircular&&this.makeCircular(),this},getAt:function(a){var b=this._getAt(a);return null!==b?b.data:null},getFirst:function(){var a=this._head;return null!==a?a.data:null},getPrevious:function(a){var b=this._getAdjacent(a,!1);return null!==b?b.data:null},getNext:function(a){var b=this._getAdjacent(a);return null!==b?b.data:null},getLast:function(){var a=this._tail;return null!==a?a.data:null},getRandom:function(){var a=0,b=this.getLength(),c=d(e()*(b-a))+a;return this.getAt(c)},getIndexOf:function(a){var b=0,d=-1;return this._traverse(function(e){return e.data===a?(d=b,c):void(b+=1)}),d},getLastIndexOf:function(a){var b=this._length-1,d=-1;return this._traverse(function(e){return e.data===a?(d=b,c):void(b-=1)},this._tail,!1),d},some:function(a,b,d){var e=this._get(b),f=!1;return this._traverse(function(b){return f=a.call(d,b.data),f?c:void 0},e),f},every:function(a,b,d){var e=this._get(b),f=!0;return this._traverse(function(b){return f=a.call(d,b.data),f?void 0:c},e),f},forEach:function(a,b,c){var d=this._get(b);this._traverse(function(b){a.call(c,b.data)},d)},forEachReverse:function(a,b,c){var d=this._get(b);this._traverse(function(b){a.call(c,b.data)},d,!1)},removeAt:function(a){var b=this._getAt(a),c=this._isHead(b),d=this._isTail(b);return null!==b?(c&&(this._head=b.next),d&&(this._tail=b.previous),b.hasNext()&&(b.next.previous=b.previous),b.hasPrevious()&&(b.previous.next=b.next),this._length-=1,(c||d||this._isCircular)&&this.makeCircular(),b.data):null},toArray:function(){for(var a=[],b=this._head;null!==b;)a.push(b.data),b=b.next;return a},toString:function(){return this.toArray().toString()},getLength:function(){return this._length},isEmpty:function(){return 0===this._length},isCircular:function(){return this._isCircular},_get:function(a){var b=null;return this._traverse(function(d){return d.data===a?(b=d,c):void 0}),b},_getAt:function(a){var b,c;if(a>-1&&a<this._length){for(b=this._head,c=0;a>c;)b=b.next,c+=1;return b}return null},_getAdjacent:function(a,b){b="boolean"==typeof b?b:!0;var d=b?"next":"previous",e=null;return this._traverse(function(b){return b.data===a?(e=b,c):void 0}),null!==e?e[d]:null},_traverse:function(a,b,d,e){b=b||this._head,d="boolean"==typeof d?d:!0;var f,g=b,h=this._length,i=d?"next":"previous";for(f=0;h>f;f+=1){if(null===g||a.call(e,g,this)===c)return;g=g[i]}},_isHead:function(a){return a===this._head},_isTail:function(a){return a===this._tail}},b});